;;; -*- mode : lisp -*-
(in-package #:staticl-user)

(asdf:load-system "staticl/format/spinneret")


(site "Example Static Site"
      :description "Just an example of the static file generated by StatiCL."
      :url "https://example.com/"
      :navigation (menu (item "Blog (EN)" "/blog/")
                        (item "Blog (RU)" "/ru/blog/")
                        (item "About" "/about/"))
      :pipeline (list (load-content)
                      (filter (:path "ru/")
                              (prev-next-links)
                              (paginated-index :target-path #P"ru/blog/"
                                               :page-title-fn (lambda (num)
                                                                (fmt "Страница ~A" num)))
                              (rss :target-path #P"ru/blog/rss.xml")
                              (atom :target-path #P"ru/blog/atom.xml")
                              (tags-index :target-path "ru/tags/"))
                      (filter (:path "ru/" :invert t)
                              (prev-next-links)
                              (paginated-index :target-path #P"blog/")
                              (rss :target-path #P"blog/rss.xml")
                              (atom :target-path #P"blog/atom.xml")
                              (tags-index :target-path "tags/"))
                      (mathjax)
                      (sitemap)
                      (disqus "staticl-example"))
      :theme "readable"
      ;; :theme "hyde"
      
      ;; These variables must be supported by template.
      ;; Otherwise, they will be ignored:
      :vars (serapeum:dict "copyright_from" 2024
                           "copyright_to" (nth-value 5
                                                     (get-decoded-time))
                           "hide_staticl_logo" t))
